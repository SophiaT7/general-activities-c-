#include <vector>
#include <map>
#include <string>
using namespace std;

class RankSupport {
private:
    string L;
    int B; // tamanho do super-bloco
    vector<map<char,int>> checkpoints;

public:
    // pré-processamento de string
    RankSupport(const string& L, int B=128) : L(L), B(B) {
        map<char,int> running;
        for (size_t i = 0; i < L.size(); i++) {
            running[L[i]]++;
            if (i % B == 0) {
                checkpoints.push_back(running); // checkpoint
            }
        }
    }

    // Consulta rank(c, i)
    int query(char c, int i) {
        int block = i / B;
        int rank_val = (block < checkpoints.size()) ? checkpoints[block][c] : 0;

        // percorre até i-1
        int start = block * B;
        for (int j = start; j < i; j++) {
            if (L[j] == c) rank_val++;
        }
        return rank_val;
    }
};

